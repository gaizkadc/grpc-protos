/*
 * Copyright (C) 2018 Nalej Group - All Rights Reserved
 */


syntax = "proto3";

package deployment_manager;
option go_package = "github.com/nalej/grpc-deployment-manager-go";

import "conductor/entities.proto";
import "application/entities.proto";

enum RollbackPolicy {
    // No rollback executed
    NONE = 0;
    // Constant retrial
    ALWAYS_RETRY = 1;
    // Limited retries
    LIMITED_RETRY = 2;
}


message DeploymentFragmentRequest {
    string request_id = 1;
    // Plan to be deployed
    conductor.DeploymentFragment fragment = 2;
    // Zero-tier network id
    string zt_network_id = 3;
    // Rollback policy
    RollbackPolicy rollback_policy = 4;
}

message DeploymentFragmentResponse {
    string request_id = 1;
    //status summary
    application.ApplicationStatus status = 2;
}

